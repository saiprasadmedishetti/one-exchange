{"version":3,"sources":["components/Trade.jsx","App.js","index.js"],"names":["socket","WebSocket","sub","channels","product_ids","type","unsub","Trade","useState","trades","setTrades","socketData","setSocketData","prev","setPrev","useEffect","fetch","then","res","json","data","splice","onopen","e","send","JSON","stringify","onmessage","parse","uniqTrades","filter","item","trade_id","newTrades","length","className","style","backgroundColor","price","color","Number","toLocaleString","low_24h","last_size","open_24h","map","trade","side","size","Date","time","toLocaleDateString","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kMAIMA,EAAS,IAAIC,UADA,kCAEbC,EAAM,CACVC,SAAU,CAAC,OAAQ,UACnBC,YAAa,CAAC,WACdC,KAAM,aAEFC,EAAQ,CACZH,SAAU,CAAC,OAAQ,UACnBC,YAAa,CAAC,WACdC,KAAM,eAiJOE,MA9If,WAAkB,IAAD,EACaC,mBAAS,IADtB,mBACRC,EADQ,KACAC,EADA,OAEqBF,mBAAS,MAF9B,mBAERG,EAFQ,KAEIC,EAFJ,OAGSJ,mBAAS,IAHlB,mBAGRK,EAHQ,KAGFC,EAHE,KA4Cf,OAvCAC,qBAAU,WAIR,OAHAC,MApBY,wDAqBTC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GAAD,OAAUV,EAAUU,EAAKC,OAAO,EAAG,QACpC,WACLX,EAAU,OAEX,IAEHK,qBAAU,WAyBR,OAxBAf,EAAOsB,OAAS,SAACC,GACfvB,EAAOwB,KAAKC,KAAKC,UAAUxB,KAE7BF,EAAO2B,UAAY,SAACJ,GAClB,IAAMH,EAAOK,KAAKG,MAAML,EAAEH,MACR,WAAdA,EAAKf,KACPO,GAAc,SAACC,GAIb,OAHIA,GACFC,EAAQD,GAEHO,KAGc,UAAdA,EAAKf,MACdK,GAAU,SAACG,GACT,IAAMgB,EAAahB,EAAKiB,QACtB,SAACC,GAAD,OAAUA,EAAKC,WAAaZ,EAAKY,YAE7BC,EAAS,CAAIb,GAAJ,mBAAaS,IAE5B,OADAI,EAAUC,OAASrB,EAAKqB,OACjBD,MAIN,WACLjC,EAAOwB,KAAKC,KAAKC,UAAUpB,OAE5B,IAGD,qCACE,qBACE6B,UAAU,SACVC,MAAO,CACLC,gBACExB,GAAQF,GAAcE,EAAKyB,MAAQ3B,EAAW2B,MAC1C,YACA,WANV,SASG3B,GACC,qCACE,qBACEwB,UAAU,QACVC,MAAO,CACLG,MAAO1B,EAAKyB,MAAQ3B,EAAW2B,MAAQ,YAAc,WAHzD,eAMKE,OAAO7B,EAAW2B,OAAOG,oBAE9B,sBAAKN,UAAU,QAAf,qBAEE,uBACEC,MAAO,CACLG,MACE1B,EAAK6B,QAAU/B,EAAW+B,QAAU,YAAc,WAHxD,eAMKF,OAAO7B,EAAW+B,SAASD,uBAGlC,sBAAKN,UAAU,QAAf,mBAEE,sBACEC,MAAO,CACLG,MACE1B,EAAK8B,UAAYhC,EAAWgC,UACxB,YACA,WALV,SAQGhC,EAAWgC,eAGhB,sBAAKR,UAAU,QAAf,sBAEE,uBACEC,MAAO,CACLG,MACE1B,EAAK+B,SAAWjC,EAAWiC,SACvB,YACA,WALV,eAQKJ,OAAO7B,EAAWiC,UAAUH,4BAMzC,qBAAKN,UAAU,SAAf,SACE,wBAAOA,UAAU,QAAjB,UACE,gCACE,+BACE,0CAEA,uCACA,sCACA,2CAGJ,gCACG1B,GACCA,EAAOyB,OAAS,GAChBzB,EAAOoC,KAAI,SAACC,GAAD,OACT,qBAEEV,MAAO,CACLG,MAAsB,SAAfO,EAAMC,KAAkB,YAAc,UAC7CV,gBACiB,SAAfS,EAAMC,KAAkB,YAAc,aAL5C,UAQE,6BAAKD,EAAMd,WAEX,oCAAOQ,OAAOM,EAAMR,OAAOG,eAAe,MAC1C,6BAAKK,EAAME,OACX,6BAAK,IAAIC,KAAKH,EAAMI,MAAMC,yBAXrBL,EAAMd,wBC/HdoB,MARf,WACE,OACE,qBAAKjB,UAAU,YAAf,SACE,cAAC,EAAD,OCANkB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.ec3e3ac8.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst API_URL = \"https://api.pro.coinbase.com/products/BTC-USD/trades\";\nconst SOCKET_URL = \"wss://ws-feed.pro.coinbase.com\";\nconst socket = new WebSocket(SOCKET_URL);\nconst sub = {\n  channels: [\"full\", \"ticker\"],\n  product_ids: [\"BTC-USD\"],\n  type: \"subscribe\",\n};\nconst unsub = {\n  channels: [\"full\", \"ticker\"],\n  product_ids: [\"BTC-USD\"],\n  type: \"unsubscribe\",\n};\n\nfunction Trade() {\n  const [trades, setTrades] = useState([]);\n  const [socketData, setSocketData] = useState(null);\n  const [prev, setPrev] = useState({});\n\n  useEffect(() => {\n    fetch(API_URL)\n      .then((res) => res.json())\n      .then((data) => setTrades(data.splice(0, 20)));\n    return () => {\n      setTrades([]);\n    };\n  }, []);\n\n  useEffect(() => {\n    socket.onopen = (e) => {\n      socket.send(JSON.stringify(sub));\n    };\n    socket.onmessage = (e) => {\n      const data = JSON.parse(e.data);\n      if (data.type === \"ticker\") {\n        setSocketData((prev) => {\n          if (prev) {\n            setPrev(prev);\n          }\n          return data;\n        });\n        // console.log(data);\n      } else if (data.type === \"match\") {\n        setTrades((prev) => {\n          const uniqTrades = prev.filter(\n            (item) => item.trade_id !== data.trade_id\n          );\n          const newTrades = [data, ...uniqTrades];\n          newTrades.length = prev.length;\n          return newTrades;\n        });\n      }\n    };\n    return () => {\n      socket.send(JSON.stringify(unsub));\n    };\n  }, []);\n\n  return (\n    <>\n      <div\n        className=\"stream\"\n        style={{\n          backgroundColor:\n            prev && socketData && prev.price > socketData.price\n              ? \"#cd5c5c1a\"\n              : \"#edf4ff\",\n        }}\n      >\n        {socketData && (\n          <>\n            <h1\n              className=\"price\"\n              style={{\n                color: prev.price > socketData.price ? \"indianred\" : \"#42a76f\",\n              }}\n            >\n              $ {Number(socketData.price).toLocaleString()}\n            </h1>\n            <div className=\"badge\">\n              Low 24hr\n              <span\n                style={{\n                  color:\n                    prev.low_24h > socketData.low_24h ? \"indianred\" : \"#42a76f\",\n                }}\n              >\n                $ {Number(socketData.low_24h).toLocaleString()}\n              </span>\n            </div>\n            <div className=\"badge\">\n              Volume\n              <span\n                style={{\n                  color:\n                    prev.last_size > socketData.last_size\n                      ? \"indianred\"\n                      : \"#42a76f\",\n                }}\n              >\n                {socketData.last_size}\n              </span>\n            </div>\n            <div className=\"badge\">\n              Open 24hr\n              <span\n                style={{\n                  color:\n                    prev.open_24h > socketData.open_24h\n                      ? \"indianred\"\n                      : \"#42a76f\",\n                }}\n              >\n                $ {Number(socketData.open_24h).toLocaleString()}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className=\"scroll\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Trade ID</th>\n              {/* <th>Side</th> */}\n              <th>Price</th>\n              <th>Size</th>\n              <th>Time</th>\n            </tr>\n          </thead>\n          <tbody>\n            {trades &&\n              trades.length > 0 &&\n              trades.map((trade) => (\n                <tr\n                  key={trade.trade_id}\n                  style={{\n                    color: trade.side === \"sell\" ? \"indianred\" : \"#42a76f\",\n                    backgroundColor:\n                      trade.side === \"sell\" ? \"#cd5c5c10\" : \"#edf4ff90\",\n                  }}\n                >\n                  <td>{trade.trade_id}</td>\n                  {/* <td>{trade.side}</td> */}\n                  <td>$ {Number(trade.price).toLocaleString(4)}</td>\n                  <td>{trade.size}</td>\n                  <td>{new Date(trade.time).toLocaleDateString()}</td>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n}\n\nexport default Trade;\n","import Trade from \"./components/Trade\";\n\nfunction App() {\n  return (\n    <div className=\"container\">\n      <Trade />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}