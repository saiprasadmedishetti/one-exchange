{"version":3,"sources":["components/Trade.jsx","App.js","index.js"],"names":["socket","WebSocket","sub","channels","product_ids","type","unsub","Trade","useState","trades","setTrades","socketData","setSocketData","prev","setPrev","useEffect","fetch","then","res","json","data","splice","onopen","e","send","JSON","stringify","onmessage","parse","uniqTrades","filter","item","trade_id","newTrades","length","className","style","color","price","Number","toLocaleString","backgroundColor","low_24h","last_size","open_24h","map","trade","side","size","Date","time","hour","minute","second","hour12","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.743615e4.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst API_URL = \"https://api.pro.coinbase.com/products/BTC-USD/trades\";\nconst SOCKET_URL = \"wss://ws-feed.pro.coinbase.com\";\nconst socket = new WebSocket(SOCKET_URL);\nconst sub = {\n  channels: [\"full\", \"ticker\"],\n  product_ids: [\"BTC-USD\"],\n  type: \"subscribe\",\n};\nconst unsub = {\n  channels: [\"full\", \"ticker\"],\n  product_ids: [\"BTC-USD\"],\n  type: \"unsubscribe\",\n};\n\nfunction Trade() {\n  const [trades, setTrades] = useState([]);\n  const [socketData, setSocketData] = useState(null);\n  const [prev, setPrev] = useState({});\n\n  useEffect(() => {\n    fetch(API_URL)\n      .then((res) => res.json())\n      .then((data) => setTrades(data.splice(0, 20)));\n    return () => {\n      setTrades([]);\n    };\n  }, []);\n\n  useEffect(() => {\n    socket.onopen = (e) => {\n      socket.send(JSON.stringify(sub));\n    };\n    socket.onmessage = (e) => {\n      const data = JSON.parse(e.data);\n      if (data.type === \"ticker\") {\n        setSocketData((prev) => {\n          if (prev) {\n            setPrev(prev);\n          }\n          return data;\n        });\n        // console.log(data);\n      } else if (data.type === \"match\") {\n        setTrades((prev) => {\n          const uniqTrades = prev.filter(\n            (item) => item.trade_id !== data.trade_id\n          );\n          const newTrades = [data, ...uniqTrades];\n          newTrades.length = prev.length;\n          return newTrades;\n        });\n      }\n    };\n    return () => {\n      socket.send(JSON.stringify(unsub));\n    };\n  }, []);\n\n  return (\n    <>\n      <div\n        className=\"stream\"\n        // style={{\n        //   backgroundColor:\n        //     prev && socketData && prev.price > socketData.price\n        //       ? \"#cd5c5c1a\"\n        //       : \"#edf4ff\",\n        // }}\n      >\n        {socketData && (\n          <>\n            <h1\n              className=\"price\"\n              style={{\n                color: prev.price > socketData.price ? \"indianred\" : \"#42a76f\",\n              }}\n            >\n              $ {Number(socketData.price).toLocaleString()}\n            </h1>\n            <div\n              className=\"badge\"\n              style={{\n                backgroundColor:\n                  prev.low_24h > socketData.low_24h ? \"#cd5c5c1a\" : \"#edf4ff\",\n              }}\n            >\n              Low 24hr\n              <span\n                style={{\n                  color:\n                    prev.low_24h > socketData.low_24h ? \"indianred\" : \"#42a76f\",\n                }}\n              >\n                $ {Number(socketData.low_24h).toLocaleString()}\n              </span>\n            </div>\n            <div\n              className=\"badge\"\n              style={{\n                backgroundColor:\n                  prev.last_size > socketData.last_size\n                    ? \"#cd5c5c1a\"\n                    : \"#edf4ff\",\n              }}\n            >\n              Volume\n              <span\n                style={{\n                  color:\n                    prev.last_size > socketData.last_size\n                      ? \"indianred\"\n                      : \"#42a76f\",\n                }}\n              >\n                {socketData.last_size}\n              </span>\n            </div>\n            <div\n              className=\"badge\"\n              style={{\n                backgroundColor:\n                  prev.open_24h > socketData.open_24h ? \"#cd5c5c1a\" : \"#edf4ff\",\n              }}\n            >\n              Open 24hr\n              <span\n                style={{\n                  color:\n                    prev.open_24h > socketData.open_24h\n                      ? \"indianred\"\n                      : \"#42a76f\",\n                }}\n              >\n                $ {Number(socketData.open_24h).toLocaleString()}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className=\"scroll\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Trade ID</th>\n              {/* <th>Side</th> */}\n              <th>Price</th>\n              <th>Size</th>\n              <th>Time</th>\n            </tr>\n          </thead>\n          <tbody>\n            {trades &&\n              trades.length > 0 &&\n              trades.map((trade) => (\n                <tr key={trade.trade_id}>\n                  <td>{trade.trade_id}</td>\n                  {/* <td>{trade.side}</td> */}\n                  <td\n                    style={{\n                      color: trade.side === \"sell\" ? \"indianred\" : \"#42a76f\",\n                    }}\n                    className=\"bold\"\n                  >\n                    $ {Number(trade.price).toLocaleString(4)}\n                  </td>\n                  <td>{trade.size}</td>\n                  <td>\n                    {new Date(trade.time).toLocaleString([], {\n                      hour: \"numeric\",\n                      minute: \"numeric\",\n                      second: \"numeric\",\n                      hour12: true,\n                    })}\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n}\n\nexport default Trade;\n","import Trade from \"./components/Trade\";\n\nfunction App() {\n  return (\n    <div className=\"container\">\n      <Trade />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}